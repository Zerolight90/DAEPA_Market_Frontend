// app/faq/page.js
"use client";

import { useMemo, useState } from "react";
import styles from "./faq.module.css";

/** ì¹´í…Œê³ ë¦¬ íƒ­ë“¤ */
const TABS = ["TOP", "ê±°ë˜ë¬¸ì˜", "ì´ìš©ë¬¸ì˜", "íšŒì›/ê³„ì •", "ìš´ì˜ì •ì±…", "ê²€ìˆ˜", "ê¸°íƒ€"];

/** ë”ë¯¸ FAQ ë°ì´í„° (DB ì—†ì´ ì‚¬ìš©) */
const FAQS = [
    // ğŸ”¹ ê¸°ì¡´ TOP í•­ëª©
    { id: 1, category: "ê±°ë˜ë¬¸ì˜", top: true, q: "[íŒë§¤ì] íŒë§¤ì™„ë£ŒëŠ” ì–¸ì œ ë˜ë‚˜ìš”?", a: "ë§ˆì´í˜ì´ì§€ í˜¹ì€ ë¬¼ê±´ ì „ì²´ ë³´ê¸°ì—ì„œ ë³¸ì¸ ìƒí’ˆì„ í´ë¦­ í›„ 'íŒë§¤ì™„ë£Œ' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”." },

    { id: 3, category: "íšŒì›/ê³„ì •", top: true, q: "ì „í™”ë²ˆí˜¸ ì¸ì¦ì´ ì•ˆë¼ìš”.", a: "í†µì‹ ì‚¬ ìŠ¤íŒ¸ ì°¨ë‹¨ì„ í•´ì œí•˜ê±°ë‚˜, 10ë¶„ ë’¤ ì¬ì‹œë„ í•´ì£¼ì„¸ìš”." },
    { id: 4, category: "ìš´ì˜ì •ì±…", top: true, q: "ì‹ ê³ ê°€ í™•ì¸ë˜ë©´ ë¶ˆì´ìµì´ ìˆë‚˜ìš”?", a: "ì‚¬ì•ˆì— ë”°ë¼ ê²Œì‹œë¬¼ ì œí•œ, ì´ìš©ì •ì§€ ë“± ì¡°ì¹˜ê°€ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤." },

    // ğŸ”¹ ê±°ë˜ë¬¸ì˜ (ìƒˆë¡œ ì¶”ê°€ëœ 4ê°œ í¬í•¨)
    {
        id: 5,
        category: "ê±°ë˜ë¬¸ì˜",
        top: false,
        q: "ì±„íŒ…ì„ ë³´ëƒˆëŠ”ë° ë‹µì¥ì´ ì•ˆì™€ìš”.",
        a: `ìƒëŒ€ë°©ì´ ì±„íŒ…ì„ ì½ì§€ ì•Šê±°ë‚˜ ë‹µì¥ì´ ì—†ëŠ” ê²½ìš°, ì—¬ëŸ¬ ê°€ì§€ ì‚¬ì •ìœ¼ë¡œ ì¸í•´ ì‘ë‹µì´ ì§€ì—°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¥ê¸°ê°„ ë¯¸ì ‘ì† ìƒíƒœì´ê±°ë‚˜ ë¡œê·¸ì•„ì›ƒ ìƒíƒœ, ì•Œë¦¼ êº¼ì§ ì„¤ì • ë“±ì˜ ì´ìœ ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ, ë‹µì¥ì´ ì¡°ê¸ˆ ëŠ¦ë”ë¼ë„ ë„ˆê·¸ëŸ½ê²Œ ì´í•´í•´ ì£¼ì‹œê¸¸ ë°”ëë‹ˆë‹¤.

ë§Œì•½ ì˜¤ëœ ì‹œê°„ ê¸°ë‹¤ë ¸ìŒì—ë„ ë‹µì¥ì´ ì—†ë‹¤ë©´, ì•„ì‰½ì§€ë§Œ ë‹¤ë¥¸ ì´ìš©ìì™€ì˜ ê±°ë˜ë¥¼ ê³ ë ¤í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.
ë˜í•œ, ìƒí’ˆëª… ìƒë‹¨ì— í‘œì‹œëœ ë“±ë¡ ì¼ìë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”. ë“±ë¡ì¼ì´ ì˜¤ë˜ëœ ê²½ìš°, ì´ë¯¸ íŒë§¤ë˜ì—ˆê±°ë‚˜ ë” ì´ìƒ í™œë™í•˜ì§€ ì•ŠëŠ” ì´ìš©ìì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•ˆì‹¬ê²°ì œë¥¼ ì´ë¯¸ ì§„í–‰í•˜ì‹  ê²½ìš°ì—ëŠ” ê±°ë˜ ì „ì— ì œí’ˆ ìƒíƒœ, ê²°ì œ ë°©ì‹, ë°°ì†¡ ë°©ë²• ë° ë°°ì†¡ë¹„ ë“±ì— ëŒ€í•´ ì¶©ë¶„íˆ ëŒ€í™”í•˜ê³  í˜‘ì˜í•œ í›„ êµ¬ë§¤í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.`
    },
    {
        id: 6,
        category: "ê±°ë˜ë¬¸ì˜",
        top: false,
        q: "ë°°ì†¡ì§€ ì„¤ì •ì„ ë³€ê²½í•˜ê³  ì‹¶ì–´ìš”!",
        a: `[ë°°ì†¡ì§€ ê´€ë¦¬]
ëŒ€íŒŒ ì›¹ > ë§ˆì´í˜ì´ì§€ > ë°°ì†¡ì§€ ê´€ë¦¬

[ë°°ì†¡ì§€ ì‚­ì œ]
ë°°ì†¡ì§€ ê´€ë¦¬ í˜ì´ì§€ ìš°ì¸¡ ìƒë‹¨ â€œí¸ì§‘â€ ë²„íŠ¼ > ì‚­ì œë¥¼ ì›í•˜ëŠ” ë°°ì†¡ì§€ì˜ â€œì‚­ì œâ€ í´ë¦­

[ë°°ì†¡ì§€ ì¶”ê°€]
ë°°ì†¡ì§€ ê´€ë¦¬ í˜ì´ì§€ í•˜ë‹¨ â€œë°°ì†¡ì§€ ì¶”ê°€â€ ë²„íŠ¼ > ë°°ì†¡ì§€ ì¶”ê°€ ì™„ë£Œ

[ëŒ€í‘œ ë°°ì†¡ì§€ ì„¤ì •]
ë°°ì†¡ì§€ ê´€ë¦¬ í˜ì´ì§€ ìš°ì¸¡ ìƒë‹¨ â€œí¸ì§‘â€ ë²„íŠ¼ > ì›í•˜ëŠ” ë°°ì†¡ì§€ì˜ â€œëŒ€í‘œ ë°°ì†¡ì§€ ì„¤ì •â€ í´ë¦­ 
í˜¹ì€
ë°°ì†¡ì§€ ê´€ë¦¬ í˜ì´ì§€ í•˜ë‹¨ "ë°°ì†¡ì§€ ì¶”ê°€" ë²„íŠ¼ > "ëŒ€í‘œ ë°°ì†¡ì§€ë¡œ ì„¤ì •" í´ë¦­`
    },
    {
        id: 7,
        category: "ê±°ë˜ë¬¸ì˜",
        top: false,
        q: "[êµ¬ë§¤ì] ì—¬ëŸ¬ ê°€ì§€ ê²°ì œìˆ˜ë‹¨ìœ¼ë¡œ ê²°ì œ ê°€ëŠ¥í•œê°€ìš”?",
        a: `í˜„ì¬ ë³µí•©ê²°ì œ ê¸°ëŠ¥ì€ ì œê³µí•˜ê³  ìˆì§€ ì•Šìœ¼ë©°,
ì¹´ë“œê²°ì œ, ì¹´ì¹´ì˜¤í˜ì´, ë„¤ì´ë²„í˜ì´, í† ìŠ¤í˜ì´, í˜ì´ì½”, ë¬´í†µì¥ì…ê¸ˆ, íœ´ëŒ€í°ê²°ì œ ì¤‘ í•˜ë‚˜ì˜ ê²°ì œìˆ˜ë‹¨ìœ¼ë¡œë§Œ ê²°ì œ ê°€ëŠ¥í•©ë‹ˆë‹¤.`
    },
    {
        id: 8,
        category: "ê±°ë˜ë¬¸ì˜",
        top: false,
        q: "[êµ¬ë§¤ì] ë°°ì†¡ê¸°ê°„ì€ ì–¼ë§ˆë‚˜ ì†Œìš”ë˜ë‚˜ìš”?",
        a: `ëŒ€íŒŒëŠ” ê°œì¸ ê°„ ê±°ë˜ í”Œë«í¼ìœ¼ë¡œ ë°°ì†¡ ê´€ë ¨ì€ íŒë§¤ìë¶„ê³¼ ë§ì”€ ë‚˜ëˆ ë³´ì‹œê¸¸ ì•ˆë‚´ë“œë¦¬ë©°,
ë°°ì†¡ ë“±ë¡ë˜ì–´ ìˆìœ¼ë‚˜ ë°°ì†¡ ì¡°íšŒê°€ ë˜ì§€ ì•Šì„ ê²½ìš° íŒë§¤ìë¶„ê»˜ì„œ ë°°ì†¡ ì ‘ìˆ˜í•˜ì‹  íƒë°°ì‚¬ë¡œ ë¬¸ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤.`
    },

    // ğŸ”¹ ë‚˜ë¨¸ì§€ ê¸°ë³¸ í•­ëª©
    { id: 9, category: "ê²€ìˆ˜", top: false, q: "ê²€ìˆ˜ì— í†µê³¼í•˜ì§€ ëª»í•˜ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?", a: "ìƒí’ˆì€ ë°˜ì†¡ ì²˜ë¦¬ë˜ë©° ì‚¬ìœ ê°€ ì•ˆë‚´ë©ë‹ˆë‹¤." },
    { id: 10, category: "ê¸°íƒ€", top: false, q: "ê´‘ê³ /ì œíœ´ ë¬¸ì˜ëŠ” ì–´ë””ë¡œ í•˜ë‚˜ìš”?", a: "help@daepa.com ìœ¼ë¡œ ë©”ì¼ì„ ë³´ë‚´ì£¼ì„¸ìš”." },
    { id: 11, category: "íšŒì›/ê³„ì •", top: false, q: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠì–´ë²„ë ¸ì–´ìš”.", a: "ë¡œê·¸ì¸ í™”ë©´ì˜ â€˜ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •â€™ì—ì„œ ì´ë©”ì¼ ì¸ì¦ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆì–´ìš”." },
    { id: 12, category: "ì´ìš©ë¬¸ì˜", top: false, q: "í‘¸ì‹œ ì•Œë¦¼ì´ ì˜¤ì§€ ì•Šì•„ìš”.", a: "ì•± ì•Œë¦¼ ê¶Œí•œê³¼ ì‹œìŠ¤í…œ ì•Œë¦¼ í—ˆìš© ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”." },
];

export default function FAQPage() {
    const [tab, setTab] = useState("TOP");
    const [query, setQuery] = useState("");
    const [openId, setOpenId] = useState(null);

    const list = useMemo(() => {
        let data = FAQS;
        data = tab === "TOP" ? data.filter(x => x.top) : data.filter(x => x.category === tab);

        if (query.trim()) {
            const q = query.trim().toLowerCase();
            data = data.filter(x => x.q.toLowerCase().includes(q) || x.a.toLowerCase().includes(q));
        }
        return data;
    }, [tab, query]);

    return (
        <div className={styles.wrap}>
            {/* ìƒë‹¨ í—¤ë” */}
            <header className={styles.header}>
                <h1 className={styles.title}>ê³ ê°ì„¼í„°</h1>
                <div className={styles.divider} />
            </header>

            {/* ì œëª© + ê²€ìƒ‰ */}
            <section className={styles.hero}>
                <h2 className={styles.subtitle}>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ FAQ</h2>
                <div className={styles.searchBox}>
                    <span className={styles.searchIcon} aria-hidden>ğŸ”</span>
                    <input
                        placeholder="ê¶ê¸ˆí•œ ì ì„ ê²€ìƒ‰í•´ ì£¼ì„¸ìš”."
                        value={query}
                        onChange={(e) => setQuery(e.target.value)}
                        aria-label="FAQ ê²€ìƒ‰"
                        className={styles.searchInput}
                    />
                </div>
            </section>

            {/* ì¹´í…Œê³ ë¦¬ íƒ­ */}
            <nav className={styles.tabs} aria-label="FAQ ì¹´í…Œê³ ë¦¬">
                {TABS.map((t) => (
                    <button
                        key={t}
                        type="button"
                        onClick={() => { setTab(t); setOpenId(null); }}
                        className={`${styles.tab} ${tab === t ? styles.active : ""}`}
                    >
                        {t}
                    </button>
                ))}
            </nav>

            {/* FAQ ë¦¬ìŠ¤íŠ¸ */}
            <section className={styles.list} role="list">
                {list.length === 0 ? (
                    <p className={styles.empty}>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´ìš”.</p>
                ) : (
                    list.map((item) => {
                        const open = openId === item.id;
                        return (
                            <article key={item.id} className={styles.row} role="listitem">
                                <button
                                    type="button"
                                    className={styles.q}
                                    onClick={() => setOpenId(open ? null : item.id)}
                                    aria-expanded={open}
                                    aria-controls={`a-${item.id}`}
                                >
                                    <span className={styles.label}>ì¹´í…Œê³ ë¦¬ Â· {item.category}</span>
                                    <span className={styles.qtext}>{item.q}</span>
                                    <span className={`${styles.chev} ${open ? styles.rot : ""}`} aria-hidden>â–¶</span>
                                </button>
                                {open && (
                                    <div id={`a-${item.id}`} className={styles.a}>
                                        {item.a}
                                    </div>
                                )}
                            </article>
                        );
                    })
                )}
            </section>
        </div>
    );
}
