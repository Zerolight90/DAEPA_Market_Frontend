/* ===== 전체 레이아웃 ===== */
.wrap {
    width: 1000px;
    margin: 40px auto;
    background: #f7f7f7;
    border-radius: 10px;
    padding: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,.06);
}

.title {
    text-align: center;
    margin: 6px 0 18px;
    font-size: 28px;
    font-weight: 800;
    letter-spacing: 0.02em;
}

.box {
    display: flex;
    border: 1px solid #e5e5e5;
    background: #fff;
    border-radius: 10px;
    overflow: hidden;
    height: 680px; /* 고정 높이 */
}

/* ===== 좌측: 방 목록 ===== */
.list {
    width: 36%;
    border-right: 1px solid #eee;
    background: #fafafa;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.listTitle {
    padding: 12px 14px;
    font-size: 15px;
    font-weight: 700;
    border-bottom: 1px solid #eee;
    background: #fff;
}

.ul {
    list-style: none;
    margin: 0;
    padding: 6px;
    overflow-y: auto;
    flex: 1;
}

.item {
    display: grid;
    grid-template-columns: 56px 1fr;
    gap: 12px;
    align-items: center;
    padding: 12px 12px;
    border-radius: 12px;
    cursor: pointer;
    transition: background .15s ease, transform .05s ease;
}
.item:hover { background: #f1f1f1; }
.item:active { transform: translateY(.5px); }
.active { background: #e9f3ff; }

.thumb {
    width: 56px;
    height: 56px;
    border-radius: 10px;
    object-fit: cover;
    border: 1px solid #eee;
}
.itemMain { min-width: 0; }

.top {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    margin-bottom: 6px;
}
.name { font-weight: 700; color: #222; }
.time { font-size: 12px; color: #888; white-space: nowrap; }

.productRow {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 2px 0 6px;
    min-width: 0;
}
.product {
    font-size: 13px;
    color: #555;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
.status {
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 999px;
    border: 1px solid;
    white-space: nowrap;
}
.progress { color:#2b5a00; border-color:#cde7b2; background:#f3faeb; }
.reserved { color:#6b3a00; border-color:#ffd9a8; background:#fff3e4; }
.done { color:#3b3b3b; border-color:#d8d8d8; background:#f3f3f3; }

.bottom { display:flex; align-items:center; gap:6px; }
.last {
    font-size: 13px; color: #666; flex: 1;
    overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.role {
    font-size: 11px; padding: 2px 6px; border-radius: 999px; border: 1px solid;
}
.seller { color:#b14700; border-color:#ffc9a4; background:#fff4e9; }
.buyer  { color:#005a37; border-color:#bfe7d8; background:#ecf9f4; }
.unread {
    min-width: 18px; height: 18px; padding: 0 6px; border-radius: 999px;
    background: #ff375f; color: #fff; font-size: 11px; line-height: 18px; text-align: center;
}

/* ===== 우측: 채팅방 ===== */
.room {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 12px 16px; border-bottom: 1px solid #eee; background: #fff;
}
.meta { display:flex; align-items:center; gap:8px; min-width:0; position:relative; }
.roomName { font-size: 16px; font-weight: 800; }
.dot { color: #c7c7c7; }
.roomProduct {
    font-size: 13px; color: #666; max-width: 300px;
    overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.headerThumb { width: 44px; height: 44px; border-radius: 8px; object-fit: cover; border:1px solid #eee; }

/* ===== 메시지 영역 ===== */
.messages {
    flex: 1;
    padding: 16px 18px 20px;
    background: #fdfdfd;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-height: 0; /* 내부 스크롤 정상화 */
}

.topLoader { text-align:center; color:#9aa0a6; font-size:12px; margin: 6px 0 10px; }

.dateDivider {
    display:flex; justify-content:center; align-items:center;
    margin: 12px 0; color:#999; font-size:12px;
}

.msg { max-width: 74%; display:flex; flex-direction:column; gap:6px; }
.other { align-self: flex-start; }
.me    { align-self: flex-end; text-align: right; }

.senderRow { display:flex; align-items:center; gap:6px; margin: 0 0 4px 0; }
.avatar { width:28px; height:28px; border-radius:50%; object-fit:cover; border:1px solid #eee; }
.senderName { font-size:12px; color:#666; }

.bubbleRow { display:inline-flex; align-items:flex-end; gap:8px; }

.image {
    max-width: 320px; max-height: 220px;
    border-radius: 14px; border: 1px solid #eee;
    box-shadow: 0 2px 8px rgba(0,0,0,.06);
    background: #fff;
}

.bubble {
    padding: 10px 14px; background: #f1f1f1; color:#222;
    border: 1px solid #eee; border-radius: 16px;
    line-height: 1.5; white-space: pre-wrap; word-break: break-word;
    box-shadow: 0 2px 8px rgba(0,0,0,.05);
}
.me .bubble {
    background: #ffe88f; border-color:#fde27a; color:#2a2a2a;
}

.timeSmall { font-size: 11px; color: #888; }
.readText { font-size: 11px; color:#0a7cff; margin-top:2px; text-align:right; display:inline-block; }

.systemMsg {
    margin: 10px auto; background: #f5f7fb; color: #5f6b7a;
    border: 1px dashed #dbe4f3; border-radius: 10px; padding: 8px 10px; font-size: 12px;
}

/* ===== 입력 바 (카드형 리디자인) ===== */
.inputBar{
    display:flex;
    align-items:center;   /* 기존: flex-end → 가운데로 */
    gap:12px;
    padding:12px 14px;
    border-top:1px solid #eee;
    background:#fff;
    position: sticky;
    bottom: 0;
    z-index: 2;
}


/* 아이콘 + 입력영역을 하나의 카드로 */
.composer{
    flex:1 1 auto;
    display:flex;
    align-items:flex-end;
    gap:10px;
    background:#f7f8fb;
    border:1px solid #e7eaf0;
    border-radius:16px;
    padding:10px 12px;
    transition: box-shadow .15s ease, border-color .15s ease, background .15s ease;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.7);
}
.composer:focus-within{
    background:#fff;
    border-color:#b8c8ff;
    box-shadow:0 0 0 3px rgba(76,91,255,.12);
}

.inputTools{
    display:flex; align-items:center; gap:8px;
}
/* MUI IconButton 다듬기 */
.inputTools :global(.MuiIconButton-root){
    width:34px; height:34px;
    border-radius:10px;
    background:#fff;
    border:1px solid #e7eaf0;
    box-shadow: 0 1px 0 rgba(0,0,0,.03);
    transition: transform .05s ease, background .15s ease, border-color .15s ease;
}
.inputTools :global(.MuiIconButton-root:hover){
    background:#f4f6fa; border-color:#dce3f2;
}
.inputTools :global(.MuiSvgIcon-root){ font-size:20px; color:#5f6368; }

/* 텍스트 입력 영역 */
.inputMain{
    flex:1 1 auto;
    display:flex; flex-direction:column; gap:8px;
    position:relative; /* 이모지 피커 기준점 */
}
.input{
    width:100%;
    min-height:44px;
    max-height:160px;
    padding:12px 14px;
    font-size:14px;
    border:none;
    outline:none;
    resize:none;        /* 기존: vertical → none */
    overflow:auto;      /* 내용 넘치면 스크롤 */
    background:transparent;
    color:#222;
}
.input::placeholder{ color:#a2a7b0; }

/* emoji-picker-react 기본 스타일 살짝 보정 */
.inputMain :global(.epr-main){
    border-radius:12px;
    box-shadow:0 10px 24px rgba(0,0,0,.12);
}

/* 업로드 미리보기 */
.imagePreview{ position:relative; display:inline-block; max-width:240px; }
.imagePreview img{
    display:block; max-width:240px; max-height:170px;
    border-radius:12px; border:1px solid #e7eaf0; background:#fff;
    box-shadow:0 2px 10px rgba(0,0,0,.06);
}
.removePreview{
    position:absolute; top:6px; right:6px;
    width:22px; height:22px; border-radius:50%;
    border:none; color:#fff; background:rgba(0,0,0,.55);
    cursor:pointer;
}

/* 전송 버튼 */
.sendBtn{
    height:44px;
    padding:0 18px;
    display:flex;               /* 추가 */
    align-items:center;         /* 추가 */
    justify-content:center;     /* 추가 */
    border:none;
    border-radius:12px;
    font-weight:700;
    color:#fff;
    background: linear-gradient(180deg,#1a73e8 0%, #1669cf 100%);
    box-shadow: 0 4px 12px rgba(26,115,232,.22);
    transition: transform .05s ease, filter .15s ease, box-shadow .15s ease;
}
.sendBtn:hover{ filter:brightness(.98); box-shadow: 0 6px 16px rgba(26,115,232,.28); }
.sendBtn:active{ transform: translateY(1px); }
.sendBtn:disabled{ background:#c8d6f3; box-shadow:none; cursor:not-allowed; }

/* 드래그앤드롭 표시용 (필요시 확장) */
.dropMask { position:relative; }

/* ===== System notice (top banner) ===== */
.systemNotice{
    margin: 8px 0 12px;
    padding: 10px 12px;
    background: #f5f7ff;
    border: 1px solid #e3e8ff;
    border-radius: 10px;
    display: flex;
    align-items: flex-start;
    gap: 10px;
    color: #2a3361;
}
.systemBadge{
    font-size: 11px;
    line-height: 1;
    padding: 4px 6px;
    border-radius: 6px;
    background: #e3e8ff;
    color: #2a3361;
    font-weight: 700;
    margin-top: 2px;
}
.systemText{
    margin: 0;
    font-size: 13px;
    line-height: 1.45;
    word-break: keep-all;
}

/* ===== Role badge (판매자/구매자) ===== */
.roleBadge{
    display:inline-block;
    padding: 2px 8px;
    margin-left: 8px;
    font-size: 11px;
    border-radius: 999px;
    border: 1px solid transparent;
    vertical-align: middle;
}
.roleSeller{
    background:#fff5f5;
    border-color:#ffd7d7;
    color:#b42318;
}
.roleBuyer{
    background:#f0fdf4;
    border-color:#bbf7d0;
    color:#166534;
}

/* ===== Room header (상단: 물품 + 상대 + 내 역할) ===== */
.roomHeader{
    display:flex;
    gap:12px;
    align-items:center;
    padding:10px 12px;
    border-bottom:1px solid #eee;
    background:#fafafa;
}
.roomThumb{
    width:44px;
    height:44px;
    border-radius:8px;
    object-fit:cover;
    flex:0 0 auto;
}
.roomMeta{ min-width:0; }
.roomTitleRow{
    display:flex;
    align-items:center;
    gap:6px;
}
.roomProduct{
    font-weight:600;
    font-size:14px;
    color:#222;
    max-width:420px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
}
.roomSub{
    font-size:12px;
    color:#666;
    margin-top:2px;
}

/* 리스트 영역에서 상품행 + 역할배지 정렬 */
.productRow{
    display:flex;
    align-items:center;
    gap:6px;
}

/* 메시지 스크롤 컨테이너에서 바깥 스크롤 전파 방지(보강) */
.messages{
    overscroll-behavior: contain;
}

/* 리스트 썸네일 + 미읽음 점 */
.thumbWrap{
    position: relative;
    display:inline-block;
}
.unreadDot{
    position: absolute;
    right: -4px;
    top: -4px;
    min-width: 18px;
    height: 18px;
    padding: 0 5px;
    border-radius: 999px;
    background: #e11d48; /* rose-600 */
    color: #fff;
    font-weight: 700;
    font-size: 11px;
    line-height: 18px;
    text-align: center;
    box-shadow: 0 0 0 2px #fff;
}

/* (이미 있던 역할/시스템/헤더 스타일 유지) */




/* ===== 반응형 ===== */
@media (max-width: 860px) {
    .wrap { width:100%; border-radius:0; padding:0; box-shadow:none; }
    .list { width:42%; }
    .roomProduct { max-width:160px; }
}
@media (max-width: 640px) {
    .box { flex-direction:column; }
    .list { width:100%; max-height:280px; }
    .roomProduct { display:none; }
    .messages { min-height:360px; }
}
